<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HUL Chatbot AI - ƒê·∫°i H·ªçc Lu·∫≠t Hu·∫ø</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              law: {
                red: "#A52A1F",
                gold: "#FFD700",
                dark: "#781d18",
                bg: "#F9FAFB",
              },
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              serif: ["Merriweather", "serif"],
            },
            animation: {
              "fade-in-up": "fadeInUp 0.3s ease-out forwards",
            },
            keyframes: {
              fadeInUp: {
                "0%": { opacity: "0", transform: "translateY(10px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background-color: rgba(165, 42, 31, 0.2);
        border-radius: 20px;
      }
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
    </style>
  </head>
  <body class="bg-law-bg font-sans h-screen overflow-hidden flex text-gray-800">
    <aside
      class="hidden md:flex flex-col w-80 bg-law-red text-white shadow-2xl z-20 relative"
    >
      <div
        class="p-6 border-b border-white/10 flex items-center gap-3 bg-black/10"
      >
        <div class="bg-white p-2 rounded-full shadow-lg">
          <i data-lucide="school" class="text-law-red w-6 h-6"></i>
        </div>
        <div>
          <h1 class="font-serif font-bold text-lg tracking-wide text-law-gold">
            HUL AI Support
          </h1>
          <p class="text-xs text-white/80 flex items-center gap-1">
            <span
              class="w-2 h-2 rounded-full bg-green-400 animate-pulse"
            ></span>
            Tr·ª±c tuy·∫øn
          </p>
        </div>
      </div>

      <div class="flex-1 overflow-y-auto p-4 custom-scrollbar">
        <div class="mb-6">
          <h2
            class="text-xs uppercase text-white/60 font-semibold mb-3 tracking-wider flex items-center gap-2"
          >
            <i data-lucide="sparkles" class="w-3 h-3 text-law-gold"></i>
            T√≠nh nƒÉng
          </h2>
          <button
            onclick="toggleModal(true)"
            class="w-full p-4 rounded-xl bg-gradient-to-r from-law-dark to-law-red border border-white/10 hover:border-law-gold/50 transition-all shadow-lg group text-left relative overflow-hidden"
          >
            <div class="flex items-center gap-3 mb-2 relative z-10">
              <div class="bg-white/10 p-2 rounded-lg">
                <i
                  data-lucide="brain-circuit"
                  class="text-law-gold w-6 h-6"
                ></i>
              </div>
              <div>
                <span class="block font-bold text-sm text-white"
                  >G√≥c T∆∞ v·∫•n 1:1</span
                >
                <span class="text-[10px] text-white/70"
                  >AI ph√¢n t√≠ch t√≠nh c√°ch</span
                >
              </div>
            </div>
            <div class="text-[10px] text-law-gold pl-1 italic relative z-10">
              "M√¨nh h·ª£p ng√†nh n√†o nh·ªâ?" ‚ú®
            </div>
          </button>
        </div>

        <div class="mb-6">
          <h2
            class="text-xs uppercase text-white/60 font-semibold mb-3 tracking-wider"
          >
            C√¢u h·ªèi ph·ªï bi·∫øn
          </h2>
          <div class="space-y-2" id="sidebar-suggestions"></div>
        </div>
      </div>

      <div
        class="p-4 bg-black/20 text-center text-[10px] text-white/50 border-t border-white/10"
      >
        ¬© 2025 Hue University of Law
      </div>
    </aside>

    <main class="flex-1 flex flex-col h-full relative bg-white md:bg-law-bg">
      <header
        class="md:hidden bg-law-red text-white p-4 flex justify-between items-center shadow-lg z-10"
      >
        <div class="flex items-center gap-2">
          <div class="bg-white p-1.5 rounded-full">
            <i data-lucide="school" class="text-law-red w-5 h-5"></i>
          </div>
          <span class="font-bold font-serif text-law-gold">HUL AI</span>
        </div>
      </header>

      <div
        id="chat-container"
        class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth"
      >
        <div class="max-w-3xl mx-auto space-y-6" id="messages-list">
          <div class="flex w-full justify-start animate-fade-in-up">
            <div class="flex max-w-[85%] md:max-w-[75%] flex-row">
              <div
                class="flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center bg-gradient-to-br from-law-red to-law-dark text-white shadow-lg mx-2 border-2 border-white"
              >
                <i data-lucide="school" class="w-5 h-5"></i>
              </div>
              <div
                class="relative p-4 rounded-2xl shadow-sm text-sm md:text-base leading-relaxed bg-white text-gray-800 border border-gray-200 rounded-tl-none"
              >
                <div
                  class="absolute -top-3 left-0 bg-gradient-to-r from-law-gold to-yellow-300 text-law-red text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm border border-white"
                >
                  <i data-lucide="sparkles" class="w-3 h-3"></i> AI Support
                </div>
                <p>
                  Xin ch√†o! T√¥i l√† Tr·ª£ l√Ω ·∫£o AI c·ªßa
                  <b>ƒê·∫°i h·ªçc Lu·∫≠t Hu·∫ø (HUL)</b>. üèõÔ∏è<br />T√¥i c√≥ th·ªÉ gi·∫£i ƒë√°p
                  th·∫Øc m·∫Øc ho·∫∑c t∆∞ v·∫•n ch·ªçn ng√†nh cho b·∫°n.
                </p>
                <div
                  class="text-[10px] mt-2 text-gray-400 text-right font-medium"
                  id="time-init"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <div
          id="typing-indicator"
          class="hidden w-full justify-start mt-4 max-w-3xl mx-auto pl-14"
        >
          <div
            class="bg-white p-3 rounded-2xl rounded-tl-none border border-gray-100 shadow-sm inline-flex items-center gap-2"
          >
            <i
              data-lucide="loader-2"
              class="animate-spin text-law-red w-4 h-4"
            ></i>
            <span class="text-xs text-gray-500 font-medium"
              >AI ƒëang suy nghƒ©...</span
            >
          </div>
        </div>
      </div>

      <div
        class="p-4 bg-white border-t border-gray-200 shadow-[0_-5px_20px_rgba(0,0,0,0.03)] z-10"
      >
        <div class="max-w-3xl mx-auto">
          <div
            class="flex gap-2 overflow-x-auto pb-4 mb-1 hide-scrollbar"
            id="quick-suggestions"
          ></div>

          <form
            id="chat-form"
            class="relative flex items-center shadow-sm rounded-2xl border border-gray-300 focus-within:ring-2 focus-within:ring-law-red/50 focus-within:border-law-red bg-gray-50 transition-all"
          >
            <input
              type="text"
              id="user-input"
              autocomplete="off"
              placeholder="Nh·∫≠p c√¢u h·ªèi cho HUL Chatbot..."
              class="flex-1 py-4 px-5 bg-transparent outline-none text-gray-700 placeholder-gray-400"
            />

            <button
              type="submit"
              id="btn-send"
              class="p-2 mr-2 rounded-xl transition-all flex items-center justify-center w-10 h-10 bg-gray-200 text-gray-400 hover:bg-law-red hover:text-white cursor-pointer"
            >
              <i data-lucide="send" class="w-5 h-5"></i>
            </button>
          </form>

          <div
            class="text-center mt-3 flex justify-center items-center gap-1.5 opacity-60"
          >
            <i data-lucide="info" class="w-3 h-3 text-law-red"></i>
            <p class="text-[10px] text-gray-500 font-medium">
              Th√¥ng tin mang t√≠nh ch·∫•t tham kh·∫£o.
            </p>
          </div>
        </div>
      </div>
    </main>

    <div
      id="advisor-modal"
      class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm transition-all duration-300"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up"
      >
        <div
          class="bg-law-red p-5 text-white flex justify-between items-start border-b-4 border-law-gold"
        >
          <div>
            <h3
              class="text-xl font-serif font-bold flex items-center gap-2 text-law-gold"
            >
              <i data-lucide="brain-circuit" class="w-6 h-6"></i>
              T∆∞ v·∫•n H∆∞·ªõng nghi·ªáp
            </h3>
          </div>
          <button
            onclick="toggleModal(false)"
            class="text-white/70 hover:text-white p-1"
          >
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>

        <div class="p-6 overflow-y-auto custom-scrollbar">
          <div id="advisor-form">
            <label class="block text-sm font-semibold text-gray-700 mb-2"
              >M√¥ t·∫£ v·ªÅ b·∫£n th√¢n:</label
            >
            <textarea
              id="advisor-input"
              class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-law-red/50 outline-none min-h-[120px] text-sm bg-gray-50 resize-none"
              placeholder="V√≠ d·ª•: Em th√≠ch tranh lu·∫≠n, t∆∞ duy logic..."
            ></textarea>
            <div class="flex gap-3 justify-end pt-4">
              <button
                onclick="toggleModal(false)"
                class="px-4 py-2 text-gray-600 font-medium text-sm hover:bg-gray-100 rounded-lg"
              >
                Hu·ª∑
              </button>
              <button
                onclick="handleAdvisorSubmit()"
                class="px-6 py-2 rounded-lg font-bold text-white bg-law-red hover:bg-law-dark shadow-md flex items-center gap-2"
              >
                <i data-lucide="sparkles" class="w-4 h-4 text-law-gold"></i>
                Ph√¢n t√≠ch
              </button>
            </div>
          </div>

          <div id="advisor-result" class="hidden">
            <div
              class="flex items-center gap-2 mb-4 text-green-800 bg-green-50 p-3 rounded-lg border border-green-200"
            >
              <i
                data-lucide="check-circle-2"
                class="w-5 h-5 text-green-600"
              ></i>
              <span class="font-bold text-sm">K·∫øt qu·∫£ t·ª´ AI:</span>
            </div>
            <div
              id="advisor-content"
              class="prose prose-sm max-w-none text-gray-800 leading-relaxed whitespace-pre-wrap"
            ></div>
            <div class="mt-6 flex justify-center">
              <button
                onclick="resetAdvisor()"
                class="text-law-red font-semibold text-sm flex items-center gap-1 hover:underline"
              >
                <i data-lucide="rotate-ccw" class="w-4 h-4"></i> T∆∞ v·∫•n l·∫°i
              </button>
            </div>
          </div>

          <div
            id="advisor-loading"
            class="hidden py-8 flex-col items-center justify-center text-center"
          >
            <i
              data-lucide="loader-2"
              class="animate-spin text-law-red w-10 h-10 mb-3"
            ></i>
            <p class="text-sm text-gray-500 font-medium">ƒêang suy nghƒ©...</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 1. C∆† S·ªû D·ªÆ LI·ªÜU C√ÇU TR·∫¢ L·ªúI (KNOWLEDGE BASE)
      // ƒê√¢y l√† n√£o c·ªßa con bot, √¥ng mu·ªën n√≥ kh√¥n h∆°n th√¨ c·ª© th√™m t·ª´ kh√≥a v√†o ƒë√¢y
      const BOT_BRAIN = [
        {
          keywords: ["ng√†nh", "ƒë√†o t·∫°o", "c√≥ g√¨", "h·ªçc g√¨"],
          answer:
            "Hi·ªán t·∫°i Tr∆∞·ªùng ƒê·∫°i h·ªçc Lu·∫≠t (HUL) ƒëang ƒë√†o t·∫°o c√°c ng√†nh m≈©i nh·ªçn sau:\n\n1. ‚öñÔ∏è **Lu·∫≠t h·ªçc**\n2. üíº **Lu·∫≠t Kinh t·∫ø**\n3. üåç **Lu·∫≠t Qu·ªëc t·∫ø**\n4. üèõÔ∏è **Lu·∫≠t H√†nh ch√≠nh**\n5. üî® **Lu·∫≠t H√¨nh s·ª±**\n6. üìù **Lu·∫≠t D√¢n s·ª±**\n\nB·∫°n quan t√¢m c·ª• th·ªÉ ng√†nh n√†o kh√¥ng?",
        },
        {
          keywords: ["ƒë·ªãa ch·ªâ", "·ªü ƒë√¢u", "v·ªã tr√≠", "ƒë·∫øn tr∆∞·ªùng"],
          answer:
            "üìç **Tr·ª• s·ªü ch√≠nh:** ƒê∆∞·ªùng V√µ VƒÉn Ki·ªát, Ph∆∞·ªùng An T√¢y, TP. Hu·∫ø.\n\nTr∆∞·ªùng n·∫±m ·ªü khu quy ho·∫°ch m·ªõi, kh√¥ng gian c·ª±c k·ª≥ r·ªông r√£i v√† tho√°ng m√°t, tha h·ªì check-in s·ªëng ·∫£o nh√©! üì∏",
        },
        {
          keywords: ["h·ªçc ph√≠", "ti·ªÅn h·ªçc", "ƒë·∫Øt kh√¥ng"],
          answer:
            "üí∞ **V·ªÅ h·ªçc ph√≠:** HUL √°p d·ª•ng m·ª©c h·ªçc ph√≠ theo quy ƒë·ªãnh c·ªßa Nh√† n∆∞·ªõc ƒë·ªëi v·ªõi tr∆∞·ªùng ƒë·∫°i h·ªçc c√¥ng l·∫≠p.\n\nM·ª©c thu s·∫Ω thay ƒë·ªïi t√πy theo s·ªë t√≠n ch·ªâ b·∫°n ƒëƒÉng k√Ω m·ªói k·ª≥. ƒê·ªÉ bi·∫øt con s·ªë ch√≠nh x√°c nh·∫•t cho nƒÉm h·ªçc n√†y, b·∫°n h√£y gh√© website ph√≤ng T√†i ch√≠nh nh√©! üí∏",
        },
        {
          keywords: ["vi·ªác l√†m", "ra tr∆∞·ªùng", "l∆∞∆°ng", "ngh·ªÅ nghi·ªáp", "l√†m g√¨", "c∆° h·ªôi"],
          answer:
            "Y√™n t√¢m nh√©! C·ª≠ nh√¢n Lu·∫≠t HUL c√≥ c∆° h·ªôi vi·ªác l√†m r·∫•t r·ªông m·ªü: \n- L√†m vi·ªác t·∫°i T√≤a √°n, Vi·ªán ki·ªÉm s√°t üèõÔ∏è\n- Ph√°p ch·∫ø doanh nghi·ªáp üíº\n- C√¥ng ch·ª©ng vi√™n, Lu·∫≠t s∆∞ üë®‚Äç‚öñÔ∏è\n- Gi·∫£ng vi√™n, Nghi√™n c·ª©u vi√™n üìö\n\nƒê·∫∑c bi·ªát ng√†nh Lu·∫≠t Kinh t·∫ø ƒëang r·∫•t 'hot' ƒë√≥!",
        },
        {
          keywords: ["li√™n h·ªá", "sƒët", "hotline", "email"],
          answer:
            "üìû **Th√¥ng tin li√™n h·ªá:**\n- Hotline tuy·ªÉn sinh: 0234.xxxx.xxx\n- Website: hul.hueuni.edu.vn\n- Fanpage: ƒê·∫°i h·ªçc Lu·∫≠t Hu·∫ø\n\nAdmin tr·ª±c page 24/7 (tr·ª´ l√∫c ng·ªß) nh√©! üòÑ",
        },
        {
          keywords: ["xin ch√†o", "hi", "hello", "ch√†o"],
          answer:
            "Ch√†o b·∫°n! üëã T√¥i l√† Tr·ª£ l√Ω ·∫£o AI c·ªßa ƒê·∫°i h·ªçc Lu·∫≠t Hu·∫ø.\nT√¥i c√≥ th·ªÉ gi√∫p b·∫°n tra c·ª©u th√¥ng tin tuy·ªÉn sinh, ng√†nh h·ªçc... B·∫°n c·∫ßn gi√∫p g√¨ n√†o? ^^",
        },
      ];

      // C√¢u tr·∫£ l·ªùi m·∫∑c ƒë·ªãnh khi kh√¥ng hi·ªÉu
      const FALLBACK_MSG =
        "Xin l·ªói, hi·ªán t·∫°i t√¥i ƒëang ch·∫°y ·ªü ch·∫ø ƒë·ªô th·ª≠ nghi·ªám n√™n ch∆∞a th·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi ph·ª©c t·∫°p n√†y. üòÖ\n\nüëâ **B·∫°n vui l√≤ng ch·ªçn c√°c c√¢u h·ªèi g·ª£i √Ω c√≥ s·∫µn b√™n d∆∞·ªõi/b√™n tr√°i ƒë·ªÉ t√¥i ph·ª•c v·ª• t·ªët nh·∫•t nh√©!**";

      // Danh s√°ch g·ª£i √Ω hi·ªÉn th·ªã
      const suggestions = [
        "HUL c√≥ nh·ªØng ng√†nh n√†o?",
        "H·ªçc Lu·∫≠t ra l√†m g√¨?",
        "ƒê·ªãa ch·ªâ tr∆∞·ªùng ·ªü ƒë√¢u?",
        "H·ªçc ph√≠ th·∫ø n√†o?",
        "Li√™n h·ªá v·ªõi tr∆∞·ªùng",
      ];

      // 2. C√ÅC H√ÄM X·ª¨ L√ù UI (GI·ªÆ NGUY√äN)
      window.toggleModal = (show) => {
        const modal = document.getElementById("advisor-modal");
        modal.classList.toggle("hidden", !show);
        modal.classList.toggle("flex", show);
      };

      window.setInput = (text) =>
        (document.getElementById("user-input").value = text);

      window.resetAdvisor = () => {
        document.getElementById("advisor-result").classList.add("hidden");
        document.getElementById("advisor-form").classList.remove("hidden");
        document.getElementById("advisor-input").value = "";
      };

      // 3. X·ª¨ L√ù CHAT CH√çNH
      const chatForm = document.getElementById("chat-form"); // ƒê·∫£m b·∫£o trong HTML th·∫ª form c√≥ id="chat-form"
      if (chatForm) {
        chatForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          await handleSend();
        });
      }

      async function handleSend() {
        const inputEl = document.getElementById("user-input");
        const text = inputEl.value.trim();
        if (!text) return;

        // X√≥a input & Hi·ªán tin nh·∫Øn User
        inputEl.value = "";
        appendMessage(text, "user");

        // Hi·ªáu ·ª©ng Typing
        const typingEl = document.getElementById("typing-indicator");
        typingEl.classList.remove("hidden");
        typingEl.classList.add("flex");
        scrollToBottom();

        // GI·∫¢ L·∫¨P ƒê·ªò TR·ªÑ C·ª¶A AI (1.5 gi√¢y)
        await new Promise((r) => setTimeout(r, 1500));

        // LOGIC T√åM C√ÇU TR·∫¢ L·ªúI (MATCHING)
        const responseText = getMockResponse(text);

        // ·∫®n typing & Hi·ªán tin nh·∫Øn Bot
        typingEl.classList.add("hidden");
        typingEl.classList.remove("flex");
        appendMessage(responseText, "bot");
      }

      function getMockResponse(userInput) {
        const lowerInput = userInput.toLowerCase();

        // Duy·ªát qua "B·ªô n√£o" ƒë·ªÉ t√¨m t·ª´ kh√≥a
        for (const item of BOT_BRAIN) {
          // N·∫øu t√¨m th·∫•y b·∫•t k·ª≥ t·ª´ kh√≥a n√†o trong c√¢u n√≥i c·ªßa user
          if (item.keywords.some((kw) => lowerInput.includes(kw))) {
            return item.answer;
          }
        }

        // Kh√¥ng t√¨m th·∫•y -> Tr·∫£ v·ªÅ c√¢u m·∫∑c ƒë·ªãnh
        return FALLBACK_MSG;
      }

      // 4. X·ª¨ L√ù T∆Ø V·∫§N (C≈®NG GI·∫¢ L·∫¨P LU√îN)
      window.handleAdvisorSubmit = async () => {
        const inputVal = document.getElementById("advisor-input").value;
        if (!inputVal.trim()) return;

        document.getElementById("advisor-form").classList.add("hidden");
        document.getElementById("advisor-loading").classList.remove("hidden");
        document.getElementById("advisor-loading").classList.add("flex");

        // Gi·∫£ l·∫≠p suy nghƒ© 2 gi√¢y
        await new Promise((r) => setTimeout(r, 2000));

        // K·ªãch b·∫£n tr·∫£ l·ªùi random cho phong ph√∫
        const advices = [
          `D·ª±a tr√™n chia s·∫ª: **"${inputVal}"**\n\nüåü AI nh·∫≠n th·∫•y b·∫°n r·∫•t h·ª£p v·ªõi **LU·∫¨T KINH T·∫æ**!\nV√¨ b·∫°n c√≥ v·∫ª th√≠ch m√¥i tr∆∞·ªùng nƒÉng ƒë·ªông, t∆∞ duy th·ª±c t·∫ø v√† c∆° h·ªôi thu nh·∫≠p cao.`,
          `Wow, m√¥ t·∫£ c·ªßa b·∫°n: **"${inputVal}"** cho th·∫•y t·ªë ch·∫•t c·ªßa m·ªôt Lu·∫≠t s∆∞ tranh t·ª•ng!\n\nüåü B·∫°n n√™n c√¢n nh·∫Øc ng√†nh **LU·∫¨T H·ªåC (Lu·∫≠t chung)** nh√©.\nN√≥ s·∫Ω trang b·ªã n·ªÅn t·∫£ng v·ªØng ch·∫Øc nh·∫•t ƒë·ªÉ b·∫°n bay cao.`,
          `Theo ph√¢n t√≠ch t·ª´ **"${inputVal}"**...\n\nüåü **LU·∫¨T QU·ªêC T·∫æ** ƒëang v·∫´y g·ªçi b·∫°n!\nC√≥ v·∫ª b·∫°n th√≠ch s·ª± h·ªôi nh·∫≠p, ngo·∫°i ng·ªØ v√† nh·ªØng v·∫•n ƒë·ªÅ vƒ© m√¥.`,
        ];
        const randomAdvice =
          advices[Math.floor(Math.random() * advices.length)];

        document.getElementById("advisor-content").innerText = randomAdvice; // D√πng innerHTML n·∫øu mu·ªën format ƒë·∫πp

        document.getElementById("advisor-loading").classList.add("hidden");
        document.getElementById("advisor-loading").classList.remove("flex");
        document.getElementById("advisor-result").classList.remove("hidden");
      };

      // 5. C√ÅC H√ÄM H·ªñ TR·ª¢ HI·ªÇN TH·ªä
      function appendMessage(text, sender) {
        const list = document.getElementById("messages-list");
        const isBot = sender === "bot";
        const time = new Date().toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
        });

        const html = `
                <div class="flex w-full ${
                  isBot ? "justify-start" : "justify-end"
                } animate-fade-in-up mb-6">
                    <div class="flex max-w-[85%] md:max-w-[75%] ${
                      isBot ? "flex-row" : "flex-row-reverse"
                    }">
                        <div class="flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${
                          isBot
                            ? "bg-gradient-to-br from-law-red to-law-dark text-white shadow-lg border-2 border-white"
                            : "bg-gray-200 text-gray-600"
                        } mx-2">
                            <i data-lucide="${
                              isBot ? "school" : "user"
                            }" class="w-5 h-5"></i>
                        </div>
                        <div class="relative p-4 rounded-2xl shadow-sm text-sm leading-relaxed ${
                          isBot
                            ? "bg-white text-gray-800 border border-gray-200 rounded-tl-none"
                            : "bg-law-red text-white rounded-tr-none"
                        }">
                            ${
                              isBot
                                ? '<div class="absolute -top-3 left-0 bg-gradient-to-r from-law-gold to-yellow-300 text-law-red text-[10px] font-bold px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm border border-white"><i data-lucide="sparkles" class="w-3 h-3"></i> AI Support</div>'
                                : ""
                            }
                            <div class="whitespace-pre-wrap">${text}</div>
                            <div class="text-[10px] mt-2 ${
                              isBot ? "text-gray-400" : "text-red-200"
                            } text-right font-medium">${time}</div>
                        </div>
                    </div>
                </div>
            `;
        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = html;
        list.appendChild(tempDiv.firstElementChild);
        lucide.createIcons();
        scrollToBottom();
      }

      function scrollToBottom() {
        const container = document.getElementById("chat-container");
        container.scrollTop = container.scrollHeight;
      }

      // INIT KHI LOAD TRANG
      document.addEventListener("DOMContentLoaded", () => {
        lucide.createIcons();

        // Set gi·ªù hi·ªán t·∫°i
        const timeInitEl = document.getElementById("time-init");
        if (timeInitEl)
          timeInitEl.innerText = new Date().toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
          });

        // Render G·ª£i √Ω Sidebar
        const sidebarHTML = suggestions
          .map(
            (s) =>
              `<button onclick="setInput('${s}');" class="w-full text-left p-3 rounded-lg bg-white/5 hover:bg-white/10 text-white/90 text-sm flex items-start gap-2 group transition-colors border border-transparent hover:border-law-gold/30"><i data-lucide="help-circle" class="w-4 h-4 mt-0.5 text-law-gold opacity-70 group-hover:opacity-100"></i>${s}</button>`
          )
          .join("");
        const sidebarEl = document.getElementById("sidebar-suggestions");
        if (sidebarEl) sidebarEl.innerHTML = sidebarHTML;

        // Render G·ª£i √Ω Nhanh (Mobile/Desktop)
        const quickHTML = suggestions
          .slice(0, 3)
          .map(
            (s) =>
              `<button onclick="setInput('${s}'); document.getElementById('btn-send').click();" class="whitespace-nowrap px-4 py-2 bg-white hover:bg-law-red hover:text-white text-gray-600 rounded-full text-xs font-medium transition-all border border-gray-200 shadow-sm">${s}</button>`
          )
          .join("");
        const quickEl = document.getElementById("quick-suggestions");
        if (quickEl) quickEl.innerHTML = quickHTML;

        lucide.createIcons();
      });
    </script>
  </body>
</html>
